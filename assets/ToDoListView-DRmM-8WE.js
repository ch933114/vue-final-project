import{u as J,s as U,c as n,o as l,a as s,b as S,d as k,t as T,r as V,e as _,f as R,g as O,h as b,i as M,w as C,v as W,F as E,j as X,n as B,k as F,l as G}from"./index-PRFqmKf9.js";const N="data:image/png;base64,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",L={class:"w-full flex justify-between items-center px-[34px] py-[16px]"},P={class:"flex gap-8"},Q={key:0,class:"hidden md:block font-bold"},D={__name:"todoListHeader",setup(w){const r=J(),{logout:u}=r,{user:a}=U(r),m=()=>{u(),V.push("/")};return(y,h)=>(l(),n("div",L,[h[0]||(h[0]=s("img",{src:N,alt:"logo照片",class:"w-[200px] md:w-auto"},null,-1)),s("div",P,[k(a).nickname?(l(),n("span",Q,T(k(a).nickname)+" 的代辦",1)):S("",!0),s("button",{class:"font-bold",onClick:m},"登出")])]))}},Z="/vue-final-project/assets/empty_deco-BU8GQkiF.png",j=_("todoList",()=>{const w=J(),{token:r}=U(w),u="https://todolist-api.hexschool.io",a=R([]),m=async()=>{try{const o=await b.get(`${u}/todos/`,{headers:{Authorization:`${r.value.trim()}`}});a.value=o.data.data||[]}catch(o){console.error("Error:",o.response?.data||o.message)}},y=async o=>{try{const t=await b.post(`${u}/todos/`,{content:o},{headers:{Authorization:`${r.value.trim()}`}});a.value.push(t.data.newTodo)}catch(t){console.error("Error:",t.response?.data||t.message)}},h=async o=>{try{await b.delete(`${u}/todos/${o.id}`,{headers:{Authorization:`${r.value.trim()}`}}),a.value=a.value.filter(t=>t.id!==o.id)}catch(t){console.error("Error:",t.response?.data||t.message)}},v=async o=>{try{const p=(await b.patch(`${u}/todos/${o.id}/toggle`,{},{headers:{Authorization:`${r.value.trim()}`}})).data;a.value=a.value.map(x=>x.id===p.id?p:x)}catch(t){console.error("Error:",t.response?.data||t.message)}},A=async o=>{try{const p=(await b.put(`${u}/todos/${o.id}`,{content:o.content},{headers:{Authorization:`${r.value.trim()}`}})).data.data;a.value=a.value.map(x=>x.id===p.id?p:x)}catch(t){console.error("Error:",t.response?.data||t.message)}},f=O(()=>a.value.filter(o=>o.status===!1).length);return{todoData:a,addTodo:y,removeTodo:h,undoneTodo:f,fetchTodos:m,toggleStatus:v,updateTodo:A}}),z={class:"max-w-[960px] mx-auto p-4"},I={class:"flex justify-between bg-white rounded-[10px] overflow-hidden shadow-md"},q={key:0,class:"flex flex-col items-center mt-[16px] rounded-[10px] overflow-hidden bg-white shadow-md"},K={class:"flex w-full"},Y=["onClick"],$={class:"w-full"},ee={class:"flex items-center gap-2 w-full border-b-2 py-[24px]"},te=["onUpdate:modelValue","onChange"],oe=["onUpdate:modelValue"],se={class:"flex gap-2 items-center"},ae=["onClick"],ne=["onClick"],le=["onClick"],re={class:"flex justify-between mx-[24px]"},de={class:"flex items-center gap-2 w-full py-[24px] font-bold"},ue={key:1,class:"flex flex-col items-center p-[60px]"},ce={__name:"todoList",setup(w){const r=j(),{addTodo:u,removeTodo:a,fetchTodos:m,toggleStatus:y,updateTodo:h}=r,{todoData:v,undoneTodo:A}=U(r),f=R(""),o=d=>{d.isEditing=!0},t=async d=>{try{await h(d),d.isEditing=!1}catch(c){console.error(c)}},p=[{label:"全部",value:"all"},{label:"待完成",value:"pending"},{label:"已完成",value:"done"}],x=d=>{if(d===""){window.alert("請填寫待辦事項內容");return}u(d),f.value=""},g=R("all"),H=O(()=>g.value==="pending"?v.value.filter(d=>d.status===!1):g.value==="done"?v.value.filter(d=>d.status===!0):v.value);return M(()=>{m()}),(d,c)=>(l(),n("div",z,[s("div",I,[C(s("input",{type:"text",placeholder:"新增待辦事項",class:"px-[16px] py-[12px] w-full focus:outline-none","onUpdate:modelValue":c[0]||(c[0]=e=>f.value=e)},null,512),[[W,f.value]]),s("button",{class:"text-white text-xl bg-black px-3 py-1 m-2 rounded-[5px]",onClick:c[1]||(c[1]=e=>x(f.value))}," + ")]),k(v).length!==0?(l(),n("div",q,[s("div",K,[(l(),n(E,null,X(p,e=>s("button",{key:e.value,onClick:i=>g.value=e.value,class:B(["w-full px-[16px] py-[16px] md:px-[48px] md:py-[16px] font-bold",g.value===e.value?"border-b-4 border-b-black":""])},T(e.label),11,Y)),64))]),s("div",$,[s("ul",null,[(l(!0),n(E,null,X(H.value,e=>(l(),n("li",{class:"flex justify-between mx-[24px]",key:e.id},[s("div",ee,[C(s("input",{type:"checkbox","onUpdate:modelValue":i=>e.status=i,onChange:i=>k(y)(e),class:"w-[20px] h-[20px]"},null,40,te),[[F,e.status]]),e.isEditing?C((l(),n("input",{key:0,"onUpdate:modelValue":i=>e.content=i,class:"border px-2 py-1 rounded"},null,8,oe)),[[W,e.content]]):(l(),n("p",{key:1,class:B(e.status?"text-gray-400 line-through":"")},T(e.content),3))]),s("div",se,[e.isEditing?(l(),n("button",{key:0,onClick:i=>t(e),class:"p-[8px] h-[40px] bg-green-500 text-white rounded"}," SAVE ",8,ae)):(l(),n("button",{key:1,onClick:i=>o(e),class:"p-[8px] h-[40px] bg-blue-500 text-white rounded"}," EDIT ",8,ne)),s("button",{onClick:i=>k(a)(e),class:"py-[8px] px-[16px] h-[40px] bg-red-500 text-white rounded"}," DELETE ",8,le)])]))),128))]),s("div",re,[s("p",de,T(k(A))+" 個待完成項目 ",1)])])])):(l(),n("div",ue,c[2]||(c[2]=[s("p",{class:"font-bold"},"目前尚無待辦事項",-1),s("img",{src:Z,alt:"無待辦插圖"},null,-1)])))]))}},ie={class:"w-full h-[100vh] [background:linear-gradient(175deg,#FFD370_50%,white_50%)]"},xe={__name:"ToDoListView",setup(w){return(r,u)=>(l(),n("div",ie,[G(D),G(ce)]))}};export{xe as default};
